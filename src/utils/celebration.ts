import confetti from "canvas-confetti";

export const emojiThemes = {
  dish: [
    "ðŸ”",
    "ðŸŒ­",
    "ðŸŒ®",
    "ðŸŒ¯",
    "ðŸ•",
    "ðŸ–",
    "ðŸ—",
    "ðŸ±",
    "ðŸ¥˜",
    "ðŸ£",
    "ðŸ¥”",
    "ðŸ«•",
    "ðŸ›",
    "ðŸ²",
  ],
  country: [
    "ðŸ‡¦ðŸ‡«",
    "ðŸ‡¦ðŸ‡±",
    "ðŸ‡©ðŸ‡¿",
    "ðŸ‡¦ðŸ‡¸",
    "ðŸ‡¦ðŸ‡©",
    "ðŸ‡¦ðŸ‡´",
    "ðŸ‡¦ðŸ‡®",
    "ðŸ‡¦ðŸ‡¶",
    "ðŸ‡¦ðŸ‡¬",
    "ðŸ‡¦ðŸ‡·",
    "ðŸ‡¦ðŸ‡²",
    "ðŸ‡¦ðŸ‡¼",
    "ðŸ‡¦ðŸ‡º",
    "ðŸ‡¦ðŸ‡¹",
    "ðŸ‡¦ðŸ‡¿",
    "ðŸ‡§ðŸ‡¸",
    "ðŸ‡§ðŸ‡­",
    "ðŸ‡§ðŸ‡©",
    "ðŸ‡§ðŸ‡§",
    "ðŸ‡§ðŸ‡¾",
    "ðŸ‡§ðŸ‡ª",
    "ðŸ‡§ðŸ‡¿",
    "ðŸ‡§ðŸ‡¯",
    "ðŸ‡§ðŸ‡²",
    "ðŸ‡§ðŸ‡¹",
    "ðŸ‡§ðŸ‡´",
    "ðŸ‡§ðŸ‡¦",
    "ðŸ‡§ðŸ‡¼",
    "ðŸ‡§ðŸ‡·",
    "ðŸ‡®ðŸ‡´",
    "ðŸ‡»ðŸ‡¬",
    "ðŸ‡§ðŸ‡³",
    "ðŸ‡§ðŸ‡¬",
    "ðŸ‡§ðŸ‡«",
    "ðŸ‡§ðŸ‡®",
    "ðŸ‡°ðŸ‡­",
    "ðŸ‡¨ðŸ‡²",
    "ðŸ‡¨ðŸ‡¦",
    "ðŸ‡¨ðŸ‡»",
    "ðŸ‡°ðŸ‡¾",
    "ðŸ‡¨ðŸ‡«",
    "ðŸ‡¹ðŸ‡©",
    "ðŸ‡¨ðŸ‡±",
    "ðŸ‡¨ðŸ‡³",
    "ðŸ‡¨ðŸ‡½",
    "ðŸ‡¨ðŸ‡¨",
    "ðŸ‡¨ðŸ‡´",
    "ðŸ‡°ðŸ‡²",
    "ðŸ‡¨ðŸ‡¬",
    "ðŸ‡¨ðŸ‡©",
    "ðŸ‡¨ðŸ‡°",
    "ðŸ‡¨ðŸ‡·",
    "ðŸ‡­ðŸ‡·",
    "ðŸ‡¨ðŸ‡º",
    "ðŸ‡¨ðŸ‡¾",
    "ðŸ‡¨ðŸ‡¿",
    "ðŸ‡©ðŸ‡°",
    "ðŸ‡©ðŸ‡¯",
    "ðŸ‡©ðŸ‡²",
    "ðŸ‡©ðŸ‡´",
    "ðŸ‡ªðŸ‡¨",
    "ðŸ‡ªðŸ‡¬",
    "ðŸ‡¸ðŸ‡»",
    "ðŸ‡¬ðŸ‡¶",
    "ðŸ‡ªðŸ‡·",
    "ðŸ‡ªðŸ‡ª",
    "ðŸ‡¸ðŸ‡¿",
    "ðŸ‡ªðŸ‡¹",
    "ðŸ‡«ðŸ‡°",
    "ðŸ‡«ðŸ‡´",
    "ðŸ‡«ðŸ‡¯",
    "ðŸ‡«ðŸ‡®",
    "ðŸ‡«ðŸ‡·",
    "ðŸ‡¬ðŸ‡«",
    "ðŸ‡µðŸ‡«",
    "ðŸ‡¹ðŸ‡«",
    "ðŸ‡¬ðŸ‡¦",
    "ðŸ‡¬ðŸ‡²",
    "ðŸ‡¬ðŸ‡ª",
    "ðŸ‡©ðŸ‡ª",
    "ðŸ‡¬ðŸ‡­",
    "ðŸ‡¬ðŸ‡®",
    "ðŸ‡¬ðŸ‡·",
    "ðŸ‡¬ðŸ‡±",
    "ðŸ‡¬ðŸ‡©",
    "ðŸ‡¬ðŸ‡µ",
    "ðŸ‡¬ðŸ‡º",
    "ðŸ‡¬ðŸ‡¹",
    "ðŸ‡¬ðŸ‡¬",
    "ðŸ‡¬ðŸ‡³",
    "ðŸ‡¬ðŸ‡¼",
    "ðŸ‡¬ðŸ‡¾",
    "ðŸ‡­ðŸ‡¹",
    "ðŸ‡­ðŸ‡³",
    "ðŸ‡­ðŸ‡°",
    "ðŸ‡­ðŸ‡º",
    "ðŸ‡®ðŸ‡¸",
    "ðŸ‡®ðŸ‡³",
    "ðŸ‡®ðŸ‡©",
    "ðŸ‡®ðŸ‡·",
    "ðŸ‡®ðŸ‡¶",
    "ðŸ‡®ðŸ‡ª",
    "ðŸ‡®ðŸ‡²",
    "ðŸ‡®ðŸ‡±",
    "ðŸ‡®ðŸ‡¹",
    "ðŸ‡¯ðŸ‡²",
    "ðŸ‡¯ðŸ‡µ",
    "ðŸ‡¯ðŸ‡ª",
    "ðŸ‡¯ðŸ‡´",
    "ðŸ‡°ðŸ‡¿",
    "ðŸ‡°ðŸ‡ª",
    "ðŸ‡°ðŸ‡®",
    "ðŸ‡½ðŸ‡°",
    "ðŸ‡°ðŸ‡¼",
    "ðŸ‡°ðŸ‡¬",
    "ðŸ‡±ðŸ‡¦",
    "ðŸ‡±ðŸ‡»",
    "ðŸ‡±ðŸ‡§",
    "ðŸ‡±ðŸ‡¸",
    "ðŸ‡±ðŸ‡·",
    "ðŸ‡±ðŸ‡¾",
    "ðŸ‡±ðŸ‡®",
    "ðŸ‡±ðŸ‡¹",
    "ðŸ‡±ðŸ‡º",
    "ðŸ‡²ðŸ‡´",
    "ðŸ‡²ðŸ‡°",
    "ðŸ‡²ðŸ‡¬",
    "ðŸ‡²ðŸ‡¼",
    "ðŸ‡²ðŸ‡¾",
    "ðŸ‡²ðŸ‡»",
    "ðŸ‡²ðŸ‡±",
    "ðŸ‡²ðŸ‡¹",
    "ðŸ‡²ðŸ‡­",
    "ðŸ‡²ðŸ‡¶",
    "ðŸ‡²ðŸ‡·",
    "ðŸ‡²ðŸ‡º",
    "ðŸ‡¾ðŸ‡¹",
    "ðŸ‡²ðŸ‡½",
    "ðŸ‡«ðŸ‡²",
    "ðŸ‡²ðŸ‡©",
    "ðŸ‡²ðŸ‡¨",
    "ðŸ‡²ðŸ‡³",
    "ðŸ‡²ðŸ‡ª",
    "ðŸ‡²ðŸ‡¸",
    "ðŸ‡²ðŸ‡¦",
    "ðŸ‡²ðŸ‡¿",
    "ðŸ‡²ðŸ‡²",
    "ðŸ‡³ðŸ‡¦",
    "ðŸ‡³ðŸ‡·",
    "ðŸ‡³ðŸ‡µ",
    "ðŸ‡³ðŸ‡±",
    "ðŸ‡³ðŸ‡¨",
    "ðŸ‡³ðŸ‡¿",
    "ðŸ‡³ðŸ‡®",
    "ðŸ‡³ðŸ‡ª",
    "ðŸ‡³ðŸ‡¬",
    "ðŸ‡³ðŸ‡º",
    "ðŸ‡²ðŸ‡µ",
    "ðŸ‡°ðŸ‡µ",
    "ðŸ‡²ðŸ‡°",
    "ðŸ‡³ðŸ‡´",
    "ðŸ‡´ðŸ‡²",
    "ðŸ‡µðŸ‡°",
    "ðŸ‡µðŸ‡¼",
    "ðŸ‡µðŸ‡¦",
    "ðŸ‡µðŸ‡¬",
    "ðŸ‡µðŸ‡¾",
    "ðŸ‡µðŸ‡ª",
    "ðŸ‡µðŸ‡­",
    "ðŸ‡µðŸ‡³",
    "ðŸ‡µðŸ‡±",
    "ðŸ‡µðŸ‡¹",
    "ðŸ‡µðŸ‡·",
    "ðŸ‡¶ðŸ‡¦",
    "ðŸ‡·ðŸ‡ª",
    "ðŸ‡·ðŸ‡´",
    "ðŸ‡·ðŸ‡º",
    "ðŸ‡·ðŸ‡¼",
    "ðŸ‡°ðŸ‡³",
    "ðŸ‡±ðŸ‡¨",
    "ðŸ‡»ðŸ‡¨",
    "ðŸ‡¼ðŸ‡¸",
    "ðŸ‡¸ðŸ‡²",
    "ðŸ‡¸ðŸ‡¹",
    "ðŸ‡¸ðŸ‡¦",
    "ðŸ‡¸ðŸ‡³",
    "ðŸ‡·ðŸ‡¸",
    "ðŸ‡¸ðŸ‡¨",
    "ðŸ‡¸ðŸ‡±",
    "ðŸ‡¸ðŸ‡¬",
    "ðŸ‡¸ðŸ‡½",
    "ðŸ‡¸ðŸ‡°",
    "ðŸ‡¸ðŸ‡®",
    "ðŸ‡¸ðŸ‡§",
    "ðŸ‡¸ðŸ‡´",
    "ðŸ‡¿ðŸ‡¦",
    "ðŸ‡°ðŸ‡·",
    "ðŸ‡¸ðŸ‡¸",
    "ðŸ‡ªðŸ‡¸",
    "ðŸ‡±ðŸ‡°",
    "ðŸ‡¸ðŸ‡©",
    "ðŸ‡¸ðŸ‡·",
    "ðŸ‡¸ðŸ‡ª",
    "ðŸ‡¨ðŸ‡­",
    "ðŸ‡¸ðŸ‡¾",
    "ðŸ‡¹ðŸ‡¼",
    "ðŸ‡¹ðŸ‡¯",
    "ðŸ‡¹ðŸ‡¿",
    "ðŸ‡¹ðŸ‡­",
    "ðŸ‡¹ðŸ‡±",
    "ðŸ‡¹ðŸ‡¬",
    "ðŸ‡¹ðŸ‡´",
    "ðŸ‡¹ðŸ‡¹",
    "ðŸ‡¹ðŸ‡³",
    "ðŸ‡¹ðŸ‡·",
    "ðŸ‡¹ðŸ‡²",
    "ðŸ‡¹ðŸ‡»",
    "ðŸ‡ºðŸ‡¬",
    "ðŸ‡ºðŸ‡¦",
    "ðŸ‡¦ðŸ‡ª",
    "ðŸ‡¬ðŸ‡§",
    "ðŸ‡ºðŸ‡¸",
    "ðŸ‡ºðŸ‡¾",
    "ðŸ‡ºðŸ‡¿",
    "ðŸ‡»ðŸ‡º",
    "ðŸ‡»ðŸ‡¦",
    "ðŸ‡»ðŸ‡ª",
    "ðŸ‡»ðŸ‡³",
    "ðŸ‡¾ðŸ‡ª",
    "ðŸ‡¿ðŸ‡²",
    "ðŸ‡¿ðŸ‡¼",
  ],
  protein: [
    "ðŸ’ª",
    "ðŸ‹ï¸",
    "ðŸ‹ï¸â€â™€ï¸",
    "ðŸ‹ï¸â€â™‚ï¸",
    "âš–ï¸",
    "ðŸ³",
    "ðŸ¥š",
    "ðŸ¥©",
    "ðŸ—",
    "ðŸ–",
    "ðŸ§€",
    "ðŸ¥›",
  ],
};

export function launchEmojiBurst(emojis: string[]) {
  const isMobile =
    typeof window !== "undefined" &&
    /iPhone|Android/i.test(navigator.userAgent);

  const scalar = isMobile ? 1.4 : 2;
  const gravity = 0.4;
  const velocity = isMobile ? 45 : 85;
  const emojiCount = isMobile ? 1 : 5;
  const particlesPerCannon = isMobile ? 15 : 40;
  const sideBurstParticles = isMobile ? 10 : 25;
  const ticks = isMobile ? 80 : 120;

  const selected = pickRandom(emojis, emojiCount);

  selected.forEach((emoji) => {
    const shape = confetti.shapeFromText({ text: emoji, scalar });

    fireCannon({
      originX: 0,
      angle: 45,
      shape,
      scalar,
      gravity,
      velocity,
      ticks,
      particles: particlesPerCannon,
    });

    fireCannon({
      originX: 1,
      angle: 135,
      shape,
      scalar,
      gravity,
      velocity,
      ticks,
      particles: particlesPerCannon,
    });
  });

  // Side bursts (generic confetti)
  ["left", "right"].forEach((side) => {
    confetti({
      particleCount: sideBurstParticles,
      gravity,
      spread: 60,
      startVelocity: velocity * 0.5,
      ticks,
      origin: {
        x: side === "left" ? 0 : 1,
        y: 0.8,
      },
      angle: side === "left" ? 45 : 135,
      shapes: ["square", "circle"],
    });
  });
}

function fireCannon({
  originX,
  angle,
  shape,
  scalar,
  gravity,
  velocity,
  ticks,
  particles,
}: {
  originX: number;
  angle: number;
  shape: ReturnType<typeof confetti.shapeFromText>;
  scalar: number;
  gravity: number;
  velocity: number;
  ticks: number;
  particles: number;
}) {
  confetti({
    angle,
    spread: 90,
    origin: { x: originX, y: 0.8 },
    particleCount: particles,
    startVelocity: velocity,
    gravity,
    ticks,
    scalar,
    shapes: [shape],
  });
}

function pickRandom<T>(arr: T[], count: number): T[] {
  const shuffled = [...arr].sort(() => 0.5 - Math.random());
  return shuffled.slice(0, count);
}
